1. 
안녕하세요 신뢰성있는 차량 및 도로 정보를 이용하여 Rally에서 트랙션 컨트롤 슬립 예측 어시스턴트 모델를 발표할 박준서입니다.

2. 
랠리는 대중적으로 알려진 F1 레이스와 다르게 다양한 노면과 기상 환경에서 개별적으로 이루어지는 자동차 경주입니다.
타이어와의 그립이 가장 좋은 아스팔트 외에 노면에서도 주행하는 자동차 경주인 만큼, 주행하면서 미끄러짐이 자주 발생하고 또 크게 발생합니다.
차량이 미끄러지는 만큼 주행 안정성도 떨어지고 속도를 내기도 어렵습니다. 이러한 미끄러짐을 보완하기 위한 기술이 이미 일상화되었습니다.

3.
트랙션 컨트롤 기술은 차량의 미끄러짐 현상을 보완하기 위한 기술로써 많은 양산차에 적용되어 있습니다.
자동차가 빠른 속도로 경주하는 상황외에서도 특히 차량이 선회하는 상황에서 슬립이 발생하게 됩니다.
트랙션 컨트롤 기술은 이러한 슬립을 인지하고 차량의 각 바퀴 속력을 적절한 슬립상태로 유지하게 만들어 안정적인 주행을 가능하게 합니다.
따라서 트랙션 컨트롤 기술은 매우 강력하나 F1 경기에서는 금지된 기술입니다. 하지만 Rally에서는 사용됩니다.

4.
구체적으로 트랙션 컨트롤이 작동하는 과정을 설명드리겠습니다. 차량의 각 바퀴에는 바퀴의 속도를 측정하는 센서가 있습니다.
이 센서에서 측정된 데이터를 차량의 ECU가 처리하여 ATC 밸브를 통해 각 바퀴의 속력을 제어하게 됩니다.
ECU는 각 바퀴의 센서로부터 얻은 데이터를 바탕으로 Slip를 디텍션 할 떄, 자동적으로 트랙션 컨트롤을 수행합니다.

5.
랠리에서 트랙션 컨트롤 기술은 널리 사용되고 있습니다. 하지만 바퀴의 속도를 측정하는 센서는 랠리 특성상 물리적으로 데미지를 
입을 확률이 높습니다. 이러한 경우 트랙션 컨트롤 기술이 적절히 사용되기 어렵고 운전자의 기량에 의존해야합니다.
이러한 문제로부터 차량 외부의 물리적 환경으로 부터 안전히 얻을 수 있는 신뢰성 있는 데이터를 바탕으로 트랙션 컨트롤을
보조할 모델이 필요하다는 것을 알 수 있습니다.

6.
안전히 얻을 수 있는 신뢰성 있는 데이터는, 비교적 안전한 곳에 위치할 수 있는 센서 또는 측량계로부터 얻을 수 있는 데이터입니다.
스티어링,엑셀,브레이크,클러치 제어 데이터와 코드라이버가 준비한 Pacenote가 그 예가 될 수 있습니다.
이러한 데이터를 이용하여 트랙션 컨트롤을 위한 슬립 디텍션을 보조할, 차량의 슬립을 예측할 모델을 구축하고자 합니다.

7.
모델 구축에 앞서 모델 학습을 위해 차량의 실시간 제어 정보와 도로 정보를 가진 데이터셋을 찾으려 했으나 찾지 못하였습니다.
대신 현재 랠리 시뮬레이터 중 가장 리얼하다고 평가되는 시뮬레이터인 더트랠리 2.0를 이용하여 데이터를 생성 및 추출하였습니다.
동일한 주행 코스에서 총 4분 40초의 주행 데이터를 생성하였고 동일한 차량 및 튜닝 상태를 설정하였습니다.

8.
관측한 데이터는 1.8만개이고, 차량의 튜닝 정보, 주행 코스의 노면 상태 등의 특징, 실시간 차량 제어 및 다이나믹스 그리고 Pace note 정보가 담겨있습니다.
Pace note 정보는 드라이버가 참고하는 앞으로 나타날 주행 코스의 곡률,길이,특징에 대한 요약 데이터입니다.

9.
관측 데이터에는 어떠한 에러값이 존재하지 않는 것을 확인하였습니다. 페이즈 노트 데이터에 존재하는 결측치는 그 자체로써의 의미가 중요하다고
판단되어 missing 값으로 두었습니다.

10.
차량은 주행 중에 언제나 slip이 발생합니다. 하지만 과도한 Slip은 사고로 이어질 수 있습니다. 관측한 데이터의 Slip 데이터를 바탕으로,
앞 또는 뒤의 양 바퀴(왼쪽과 오른쪽)간 Slip 값의 편차가 2.5보다 크면 과도한 슬립이 발생한다고 가정하였습니다. 그리고 슬립이 발생한 것으로
나타나는 관측치에 대해서 주행 영상을 참고해보았습니다.

11.
실제로 해당 관측치에서는 숙련된 드라이버의 기술이 필요한 정도로 차량이 미끄러지고 불안정했습니다.
왼쪽은 언더스티어가 발생한 상태이고, 오른쪽은 오버스티어가 발생하여 운전자가 카운터 스티어링을 하고 있습니다.

12.
안정적으로 얻을 수 있는, 신뢰성 있는 데이터를 이용하여 모델을 학습시키기 위해서, 시간 스티어링,엑셀,브레이크,클러치 제어 데이터, 
도로 정보 그리고 pacenote 정보에 해당하는 특성만을 분리하였습니다. ​그리고 앞 또는 뒤의 양 바퀴간 슬립 값 편차가 특정치를 넘을 경우 과도한 슬립이
 발생했다고 판단하고 그 여부를 0과 1의 값으로 하여 타겟을 정의하였습니다.

13.
​타겟인 슬립 이슈의 히스토그램입니다. 과도한 클래스 쏠림은 없는 것으로 확인되었습니다.

14.
분리된 특성과 타겟 1.8만여개의 관측 데이터를 0.64:0.16:0.2의 비율로 클래스 분포를 고려하여 분리하였습니다.
스티어링,엑셀 등의 실수형 특성에 대해서는 표준화를 하였고, 도로 정보 등과 같은 범주형 특성에 대해서는 Ordinal Encoding를 적용하였습니다.
한편 범주형 특성의 카디널리티에는 특이치가 없었습니다.

15.
트랙션 컨트롤 슬립 예측 어시스턴트 모델 후보로 랜덤포레스트 클래시파이어, 엑스쥐비클래쉬파이어 그리고 최빈값으로 예측하는 베이스 라인을
학습시키고 각각 검증 셋에 대한 F1과 auc score를 바탕으로 최적의 모델을 도출하기로 하였습니다. 분류 문제에서 auc score는 일반적으로
용이한 평가 지표입니다. 슬립 예측이 0 과 1 모두에 대해 좋은 예측을 하지 못하면 현저한 레이스 속도 저하가 발생할 수 있기 때문에 f1 스코어를 평가지표에 
넣었습니다.

16.
크로스 밸리데이션과 하이퍼 파라미터 튜닝은 크로스 벨리데이션 그리드 서치를 통해 진행하였습니다.
랜덤포레스트 클래시파이어의 경우 다수의 트리와 랜덤성이 과적합을 충분히 해결한다고 보아 맥스 뎁스 값과 클래스 웨이트에 대해서 서치했습니다.
엑스쥐비클래시파이어의 경우 부스팅을 통해 과적합이 될 수 있으므로 더 많은 하이퍼파라미터를 서치하였습니다.

17.
크로스 벨리데이션과 최상의 하이퍼파라미터를 사용한 각 모델의 평가 지표값은 다음과 같습니다.
결과적으로 엑스쥐비클래시파이어가 F1과 auc score에서 모두 높은 값을 보였습니다. 

18.
XGB클래시파이어의 컴플릭스 매트릭스를 통해 해당 모델이 0과 1 모두에 대해 매우 잘 예측하고 있는 것을 알 수 있습니다.

19.
XGB 클래시파이어가 잘 일반화되었는지 테스트셋에 대해 예측한 결과, F1과 roc auc 스코어가 검증 지표와 동일한 것으로 나타났습니다.
따라서 XGB 클래시파이어는 학습셋에 과적합되지 않았으며, 높은 스코어로 잘 예측한다는 것을 알 수 있습니다.

20.
XGB 클래시파이어의 검증셋에 대한 순열 중요도를 확인해보았습니다.
차량의 주행 중 체감하는 좌우 관성가속력 값이 차량의 슬립을 판단하는데 가장 중요한 것으로 나타났습니다.
그 다음으로는 핸들의 회전 정도, 앞뒤 관성가속력 그리고 핸들 변화량 순으로 중요합니다.

21.
트랙션 컨트롤 슬립 예측 어시스턴트 모델 구축 결과, 차량 주행 중 G값, 스티어링 제어 관련 정보, 그리고 속도 및 가속도 정보를 활용하여 차량의 Slip를 
효과적으로 Detection 할 수 있다고 결론할 수 있습니다.

22.
한편 모델 학습에 사용된 데이터는 5분 정도의 차량 주행 데이터로써 현실적으로 일반화된 모델이라고 보기 어렵습니다.
앞으로 더 다양한 환경과 차량의 더 많은 시간의 주행 데이터를 통해 모델을 발전시켜야 할 것입니다.
또한 순열 중요도의 결과를 바탕으로 특성을 가공한다면 더 높은 성능을 얻을 수 있을 것으로 보입니다.

이상입니다. 감사합니다.


  